<?xml version="1.0" encoding="UTF-8"?>
<!--
    ================================================
    IIS Simple Configuration - SIN URL Rewrite Module
    ================================================
    Coloca este archivo en: C:\M7Aplicaciones\Avery\web.config
    
    ESTE ARCHIVO SOLO CONFIGURA EL SERVIDOR
    La redirección se hace con index.html
    
    ⚠️ IMPORTANTE: 
    - NO requiere URL Rewrite Module
    - Usa index.html para la redirección
    - Solo configura opciones básicas de IIS
-->
<configuration>
    <system.webServer>
        
        <!-- Documento por defecto -->
        <defaultDocument enabled="true">
            <files>
                <clear />
                <add value="index.html" />
                <add value="default.html" />
                <add value="index.htm" />
            </files>
        </defaultDocument>

        <!-- Configuración de MIME types -->
        <staticContent>
            <mimeMap fileExtension=".json" mimeType="application/json" />
            <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
            <mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
        </staticContent>

        <!-- Habilitar contenido estático -->
        <handlers>
            <add name="StaticFile" path="*" verb="*" modules="StaticFileModule" resourceType="Either" requireAccess="Read" />
        </handlers>

        <!-- Headers de seguridad -->
        <httpProtocol>
            <customHeaders>
                <add name="X-Frame-Options" value="SAMEORIGIN" />
                <add name="X-Content-Type-Options" value="nosniff" />
                <add name="X-XSS-Protection" value="1; mode=block" />
            </customHeaders>
        </httpProtocol>

        <!-- Deshabilitar errores detallados en producción -->
        <httpErrors errorMode="DetailedLocalOnly" existingResponse="Auto">
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" prefixLanguageFilePath="" path="/index.html" responseMode="ExecuteURL" />
        </httpErrors>

        <!-- Compresión -->
        <urlCompression doStaticCompression="true" doDynamicCompression="true" />

    </system.webServer>

    <!-- Configuración de ASP.NET (si aplica) -->
    <system.web>
        <compilation debug="false" />
        <customErrors mode="RemoteOnly" defaultRedirect="~/index.html" />
    </system.web>

</configuration>
